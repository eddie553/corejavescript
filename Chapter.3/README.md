# Chapter.3

## this : 함수를 호출하는 방법에 따라 결정된다.

### ex. 3-1

[브라우저 환경]

전역공간에서의 this는 전역객체 (window)

### ex. 3-2

[Node.js 환경에서의 전역객체]

전역공간에서의 this는 전역객체 (global)

### ex. 3-3

[전역변수와 전역객체]

자바스크립트의 모든 변수는 특정 객체의 프로퍼티로서 동작하는데
전역변수는 전역객체의 프로퍼티로 할당된다.

### ex. 3-4

[전역변수와 전역객체]

전역공간에서의 변수 선언이나 전역객체의 프로퍼티에 직접 할당이나 대부분 똑같이 동작한다.

### ex. 3-5

[전역변수와 전역객체]

전역변수를 선언하면 자바스크립트 엔진이 전역객ㅊ체의 프로퍼티로 할당하면서 추가적으로 해당 프로퍼티의 configurable 속성(변경 및 삭제 가능성)을 false로 정의한다.

- 전역변수는 delete 연산자 false
- 전역객체의 프로퍼티는 delete 연산자 true

### ex. 3-6

[함수로서 호출, 메서드로서 호출]

객체의 프로퍼티에 할당된 함수는 객체의 메서드로서 호출할 경우 메서드로 동작하고 그렇지 않으면 함수로 동작한다.

- 함수로서 호출 시 this
  전역객체
- 메서드로서 호출 시 this
  함수 프로퍼티명 앞의 객체

### ex. 3-7

[메서드로서의 호출하기]

1. 점 표기법 (obj.method)
2. 대괄호 표기법 (obj['method'])

### ex. 3-8

[메서드 내부에서의 this]

- 메서드로서 호출 시 this
  함수 프로퍼티명 앞의 객체 = 점 표기법 앞의 객체

### ex. 3-9

[함수로서 호출 시 내부함수에서의 this]

- 함수로서 호출 시 this
  전역객체

### ex. 3-10

[내부함수에서의 this를 우회하는 방법]

내부함수의 this가 외부함수의 this와 같으려면
외부함수에서 변수를 하나 선언하고, this를 할당해주어 내부함수에서 그 변수를 사용하면 되는 간단한 방법.

### ex. 3-11

[this를 바인딩하지 않는 함수, 화살표 함수]

ES6의 화살표 함수는 상위 스코프의 this를 그대로 활용한다.

### ex. 3-12

[콜백 함수 내부에서의 this]

- 콜백 함수 : 다른 함수들의 argument로 전달하는 함수
- 콜백 함수 내부에서의 this : 콜백 함수를 부른 함수가 결정한다.
  (예제)
  addEventListener 메서드는 콜백 함수를 호출할 때 자신의 this를 상속하도록 되어있다.
  -> dom element selection을 한 a가 this가 된다.

### ex. 3-13

[생성자 함수]

생성자 함수 : 공통된 성질을 지니는 객체들을 생성하는 데 사용하는 함수
(new) 명령어를 사용했을 때 thihs는 생성한 인스턴스를 가르킨다.

### ex. 3-14, 3-15

[명시적으로 this를 바인딩하는 방법]

- call 메서드
  메서드의 호출 주체인 함수를 즉시 실행하도록 하는 명령.
  첫 번째 인자를 this로 바인딩한다.

### ex. 3-16

[명시적으로 this를 바인딩하는 방법]

- apply 메서드
  call과 동일한 기능
  두 번째 인자는 배열로 받아 매개변수로 지정한다는 차이점만 존재.

### ex. 3-17

[call/apply 메서드 활용 : 유사배열객체에 배열 메서드를 적용]

유사배열객체 : 프로퍼티가 index, length로 존재하는 객체
call/apply 메서드를 이용하여 배열 메서드를 적용시킬 수 있다.

push, slice 메서드의 this를 obj로 바인딩해주었다.

### ex. 3-18

[call/apply 메서드 활용: 유사배열객체에 배열 메서드를 적용 - arguments, NodeList]

arguments와 Node 선택자로 선택한 NodeList도 유사배열객체로 배열 메서드 사용 가능.

### ex. 3-19

[call/apply 메서드 활용 : 유사배열객체에 배열 메서드를 적용 - 문자열]

문자열은 length 프로퍼티가 읽기 전용이기 때문에 원본 문자열에 변경을 가하는 메서드는 에러가 난다.
(string= immutable)

map 메서드로 newArr에 새로운 배열을 할당해주었다.
reduce메서드로 newStr에 새로운 문자열을 할당해주었다.

### ex. 3-20

[Array.from 메서드]

ES6의 Array.from 메서드로 모든 종류의 데이터 타입을 배열로 전환할 수 있다.

### ex. 3-21

[ call/apply 메서드 활용 : 생성자 내부에서 다른 생성자를 호출]

다른 생성자와 공통된 내용이 있을 경우 call/ apply를 이용하여 다른 생성자 호출하기로 반복 줄이기.

Student에서 call메서드로 Person의 this를 Student의 this로 가르키도록 지정,
Employee서 apply메서드로 Person의 this를 Employee의 this로 가르키도록 지정.

### ex. 3-22

[ call/apply 메서드 활용하지 않았을 때 최대/최소 구하는 코드]
배열의 요소들을 다 비교하기 위해 forEach를 사용했고, 길고 가독성이 좋지 않음.

### ex. 3-23

[ call/apply 메서드 활용 : 여러 인수를 묶어 하나의 배열로 전달하고 싶을 때]

apply를 활용한다.
apply의 첫 번째 인자로 null 사용의 이유는 this를 사용하지 않았기 때문.

### ex. 3-24

[여러 인수를 묶어 하나의 배열로 전달하고 싶을 때- ES6의 펼치기 연산자 활용]
예제 3-23은 apply없이 ... 펼치기 연산자를 활용할 수도 있다.

### ex. 3-25

[bind 메서드]

- bind 메서드
  call과 비슷하지만 즉시 호출하지 않고 넘겨 받은 this 및 인수들을 바탕으로 새로운 함수를 반환하기만 하는 함수

함수로 반환한다는 점이 call과 다르다.
bind의 첫 번째 인자는 this, 그 뒤 인자들은 매개변수로 전달된다.

### ex. 3-26

[bind 메서드의 name 프로퍼티]
bind 메서드를 사용하여 새로 만든 함수는 name 프로퍼티에 bound 접두어가 붙는다. (추적이 수월)

### ex. 3-27

[상위 컨텍스트의 this를 내부함수나 콜백 함수에 전달하기]

1. 변수를 활용한 우회법 (예제 3-10)
2. call / apply (예제 3-27)
3. bind (예제 3-27)

### ex. 3-28

[bind 메서드로 내부함수에 this 전달]
logThis함수에 bind로 this 값을 전달해줌.

### ex. 3-29

[화살표 함수 내부에서의 this]

화살표 내부에는 this가 아예 없으며, 접근하고자 하면 스코프체인상 가장 가까운 this에 접근하게 된다.
